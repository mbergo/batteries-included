apiVersion: v1
kind: ConfigMap
metadata:
  name: batteries-dashboard-static
  namespace: battery-core
data:
  index.html: |
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Batteries Dashboard - Azure Kubernetes</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <style>
            @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
            * { font-family: 'Inter', sans-serif; }
            
            /* Custom animations */
            @keyframes gradient {
                0%, 100% { background-position: 0% 50%; }
                50% { background-position: 100% 50%; }
            }
            
            @keyframes float {
                0%, 100% { transform: translateY(0px); }
                50% { transform: translateY(-10px); }
            }
            
            .gradient-bg {
                background: linear-gradient(-45deg, #0a0a0a, #1a0a2e, #3b0764, #6b21a8, #3b0764, #1a0a2e, #0a0a0a);
                background-size: 400% 400%;
                animation: gradient 15s ease infinite;
            }
            
            .glass {
                background: rgba(255, 255, 255, 0.05);
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.1);
            }
            
            .glow-purple {
                box-shadow: 0 0 30px -5px rgba(168, 85, 247, 0.4);
            }
            
            .float-animation {
                animation: float 3s ease-in-out infinite;
            }
        </style>
    </head>
    <body class="gradient-bg text-white min-h-screen">
        <!-- Header -->
        <header class="glass border-b border-purple-800/30">
            <div class="container mx-auto px-6 py-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 rounded-lg bg-gradient-to-br from-purple-500 to-purple-700 flex items-center justify-center">
                            <span class="text-white font-bold text-xl">‚ö°</span>
                        </div>
                        <div>
                            <h1 class="text-2xl font-bold bg-gradient-to-r from-purple-400 to-purple-600 bg-clip-text text-transparent">
                                Batteries Dashboard
                            </h1>
                            <p class="text-xs text-purple-400/60">Azure Kubernetes Service</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-4">
                        <span class="px-3 py-1 rounded-full bg-purple-900/30 border border-purple-700/30 text-xs">
                            üåê Azure
                        </span>
                        <span class="px-3 py-1 rounded-full bg-purple-900/30 border border-purple-700/30 text-xs">
                            üìç East US
                        </span>
                        <span class="px-3 py-1 rounded-full bg-green-900/30 border border-green-700/30 text-xs">
                            ‚úÖ Healthy
                        </span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Dashboard -->
        <div class="container mx-auto px-6 py-8">
            <!-- Hero Section -->
            <div class="mb-8">
                <h2 class="text-4xl font-bold mb-2 bg-gradient-to-r from-purple-400 to-purple-600 bg-clip-text text-transparent">
                    Cluster Overview
                </h2>
                <p class="text-purple-300/60">Real-time monitoring for batteries-included-aks</p>
            </div>

            <!-- Stats Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <!-- Cluster Health -->
                <div class="glass rounded-xl p-6 glow-purple float-animation">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-purple-300">Cluster Health</h3>
                        <span class="w-3 h-3 bg-green-400 rounded-full animate-pulse"></span>
                    </div>
                    <div class="text-3xl font-bold text-purple-400">Healthy</div>
                    <div class="text-sm text-purple-500/60 mt-2">All systems operational</div>
                </div>

                <!-- Nodes -->
                <div class="glass rounded-xl p-6 glow-purple float-animation" style="animation-delay: 0.2s">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-purple-300">Nodes</h3>
                        <span class="text-purple-400">üíª</span>
                    </div>
                    <div class="text-3xl font-bold text-purple-400">2</div>
                    <div class="text-sm text-purple-500/60 mt-2">Standard_D2s_v3</div>
                </div>

                <!-- Pods -->
                <div class="glass rounded-xl p-6 glow-purple float-animation" style="animation-delay: 0.4s">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-purple-300">Pods Running</h3>
                        <span class="text-purple-400">üì¶</span>
                    </div>
                    <div class="text-3xl font-bold text-purple-400">12</div>
                    <div class="text-sm text-green-400 mt-2">All healthy</div>
                </div>

                <!-- Services -->
                <div class="glass rounded-xl p-6 glow-purple float-animation" style="animation-delay: 0.6s">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-purple-300">Services</h3>
                        <span class="text-purple-400">üåê</span>
                    </div>
                    <div class="text-3xl font-bold text-purple-400">8</div>
                    <div class="text-sm text-purple-500/60 mt-2">3 LoadBalancer</div>
                </div>
            </div>

            <!-- Resource Usage -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <!-- CPU Usage -->
                <div class="glass rounded-xl p-6 glow-purple">
                    <h3 class="text-purple-300 mb-4">CPU Usage</h3>
                    <div class="space-y-3">
                        <div>
                            <div class="flex justify-between text-sm mb-1">
                                <span class="text-purple-400">Current Usage</span>
                                <span class="text-purple-300">25%</span>
                            </div>
                            <div class="h-4 bg-purple-950/50 rounded-full overflow-hidden">
                                <div class="h-full bg-gradient-to-r from-purple-600 to-purple-400 rounded-full" style="width: 25%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-sm mb-1">
                                <span class="text-purple-400">Allocated</span>
                                <span class="text-purple-300">2.5 / 4 cores</span>
                            </div>
                            <div class="h-4 bg-purple-950/50 rounded-full overflow-hidden">
                                <div class="h-full bg-gradient-to-r from-purple-600 to-purple-400 rounded-full" style="width: 62.5%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Memory Usage -->
                <div class="glass rounded-xl p-6 glow-purple">
                    <h3 class="text-purple-300 mb-4">Memory Usage</h3>
                    <div class="space-y-3">
                        <div>
                            <div class="flex justify-between text-sm mb-1">
                                <span class="text-purple-400">Current Usage</span>
                                <span class="text-purple-300">42%</span>
                            </div>
                            <div class="h-4 bg-purple-950/50 rounded-full overflow-hidden">
                                <div class="h-full bg-gradient-to-r from-purple-600 to-purple-400 rounded-full" style="width: 42%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-sm mb-1">
                                <span class="text-purple-400">Allocated</span>
                                <span class="text-purple-300">6.7 / 16 GB</span>
                            </div>
                            <div class="h-4 bg-purple-950/50 rounded-full overflow-hidden">
                                <div class="h-full bg-gradient-to-r from-purple-600 to-purple-400 rounded-full" style="width: 42%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Services List -->
            <div class="glass rounded-xl p-6 glow-purple mb-8">
                <h3 class="text-purple-300 mb-4">Active Services</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div class="p-4 rounded-lg bg-purple-950/30 border border-purple-700/30">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-purple-200 font-medium">Dashboard</span>
                            <span class="text-xs px-2 py-1 bg-green-500/20 text-green-400 rounded">Running</span>
                        </div>
                        <div class="text-xs text-purple-400/60">
                            <div>Type: LoadBalancer</div>
                            <div>Port: 80</div>
                            <div>IP: 4.157.150.5</div>
                        </div>
                    </div>
                    
                    <div class="p-4 rounded-lg bg-purple-950/30 border border-purple-700/30">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-purple-200 font-medium">Grafana</span>
                            <span class="text-xs px-2 py-1 bg-green-500/20 text-green-400 rounded">Running</span>
                        </div>
                        <div class="text-xs text-purple-400/60">
                            <div>Type: LoadBalancer</div>
                            <div>Port: 3000</div>
                            <div>IP: 172.171.94.232</div>
                        </div>
                    </div>
                    
                    <div class="p-4 rounded-lg bg-purple-950/30 border border-purple-700/30">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-purple-200 font-medium">PostgreSQL</span>
                            <span class="text-xs px-2 py-1 bg-green-500/20 text-green-400 rounded">Running</span>
                        </div>
                        <div class="text-xs text-purple-400/60">
                            <div>Type: ClusterIP</div>
                            <div>Port: 5432</div>
                            <div>Internal Only</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bearer Token Section -->
            <div class="glass rounded-xl p-6 glow-purple">
                <h3 class="text-purple-300 mb-4">Access Tokens</h3>
                <div class="space-y-3">
                    <div class="p-4 rounded-lg bg-purple-950/30 border border-purple-700/30">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-purple-200 font-medium">üîë Dashboard Bearer Token</span>
                            <button onclick="copyToken()" class="px-3 py-1 text-xs bg-purple-600/30 hover:bg-purple-600/50 rounded transition-colors">
                                Copy
                            </button>
                        </div>
                        <div class="font-mono text-xs text-purple-400/80 break-all" id="token">
                            eyJhbGciOiJSUzI1NiIsImtpZCI6Ijhi...
                        </div>
                    </div>
                    
                    <div class="p-3 rounded-lg bg-purple-950/20 border border-purple-800/30">
                        <p class="text-xs text-purple-400/80">
                            <span class="text-purple-300">‚ö†Ô∏è Security Notice:</span> Keep these tokens secure. They provide full access to your cluster.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <script>
            // Copy token functionality
            function copyToken() {
                const token = 'eyJhbGciOiJSUzI1NiIsImtpZCI6Ijhic3ZvWGtHT2NMRmZPbFgyeExtY085RWNtMmRFblpGUHh6QUFVYXhqc3cifQ.eyJhdWQiOlsiaHR0cHM6Ly9lYXN0dXMub2ljLnByb2QtYWtzLmF6dXJlLmNvbS9lMjA1MDVkYi1iNTZmLTQ3MDEtYWU2Yi03MGU0NDgxMTg5YjUvYmNiZWJmYTEtN2YyMy00Y2FmLThjMjYtOGRhZjk3Yzk4NzUzLyIsImh0dHBzOi8vYmF0dGVyaWVzLS1iYXR0ZXJpZXMtaW5jbHVkLTMwZjVkNy1lZ3Y5ajZibi5oY3AuZWFzdHVzLmF6bWs4cy5pbyIsIlwiYmF0dGVyaWVzLS1iYXR0ZXJpZXMtaW5jbHVkLTMwZjVkNy1lZ3Y5ajZibi5oY3AuZWFzdHVzLmF6bWs4cy5pb1wiIl0sImV4cCI6MTc1NzExODYyOSwiaWF0IjoxNzU3MDMyMjI5LCJpc3MiOiJodHRwczovL2Vhc3R1cy5vaWMucHJvZC1ha3MuYXp1cmUuY29tL2UyMDUwNWRiLWI1NmYtNDcwMS1hZTZiLTcwZTQ0ODExODliNS9iY2JlYmZhMS03ZjIzLTRjYWYtOGMyNi04ZGFmOTdjOTg3NTMvIiwianRpIjoiYzU2MWQ3NTYtM2YyZC00NWJmLTg4OTgtYjAzOGMxM2Y3ZGE2Iiwia3ViZXJuZXRlcy5pbyI6eyJuYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsInNlcnZpY2VhY2NvdW50Ijp7Im5hbWUiOiJhZG1pbi11c2VyIiwidWlkIjoiZGMzZTJjODUtZDlkYS00MjQzLTkwNjUtYTI2MTgxMTY5NjZmIn19LCJuYmYiOjE3NTcwMzIyMjksInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDprdWJlcm5ldGVzLWRhc2hib2FyZDphZG1pbi11c2VyIn0.ALfOduefYOXdxNa9jVRGSHYX0lSInZNr4I06mZHpQlhazidrZ17_2ZEm9T6hJfBMKsoxZCrwwnF2s9M3imfHyfkz4A915fVPjiM3rBdLngftBXWZiUayAFsO9l7Nzfq4lgOKzqfZ5IU1p_GfoWXIt_nOlJDpyLKC8ewR4GeMy3WeGrXq-yai-H5ueJXEHXpVD4D7xvSlNLEHMIGzwHB698nY5qiK8lTBogMuRwgOAxqBk_hTv3CCmJUVEVKjFAqtaSeswUZkhNyFxNNDleTIU6MvLa7x5DWCEzrbiXYVx3CQ-CWFbdCvINEMvuqF8Y0fSzaFVgEz8YcfJ5OKwqiwU0kTHKSkbLq_l582ZnsUtPo7SQOccF6g9Acaa2PcpakrqWvdYq6ZUT5gLIJXbjBuikOj2cMNi_s3cGu-AxtmRbjCDWpTXjuYSMAcNWExPLBfN59szgT9Od6V8qBgsG9YQpfjhFIjVWnx2CRL0I-venQfUxm3zPaJMjAR-XI0eqUPYTsoVh2vVy2evOydqSzfJLyGYaCL-dFE0un1BZhZNiFJE__tfQIXll5bGsxBNa5kJ8diPs78YFzE6a9nvhM4Vn6oJxMmm14pm2beNNOrY7Kjte8QYsnhCXvyvk9HqycZx76Dqldp-JwX3rRmLfWIBcfMiZgx-IGuu_g-zCvHDW4';
                navigator.clipboard.writeText(token);
                alert('Token copied to clipboard!');
            }

            // Animate numbers on load
            window.addEventListener('load', () => {
                const animateValue = (element, start, end, duration) => {
                    let startTimestamp = null;
                    const step = (timestamp) => {
                        if (!startTimestamp) startTimestamp = timestamp;
                        const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                        element.innerHTML = Math.floor(progress * (end - start) + start);
                        if (progress < 1) {
                            window.requestAnimationFrame(step);
                        }
                    };
                    window.requestAnimationFrame(step);
                };

                // Animate stats
                const stats = document.querySelectorAll('.text-3xl');
                stats.forEach((stat, index) => {
                    if (stat.innerHTML.match(/^\d+$/)) {
                        const value = parseInt(stat.innerHTML);
                        animateValue(stat, 0, value, 1000 + index * 200);
                    }
                });
            });
        </script>
    </body>
    </html>
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: batteries-dashboard-static
  namespace: battery-core
  labels:
    app: batteries-dashboard-static
spec:
  replicas: 2
  selector:
    matchLabels:
      app: batteries-dashboard-static
  template:
    metadata:
      labels:
        app: batteries-dashboard-static
    spec:
      containers:
      - name: nginx
        image: nginx:alpine
        ports:
        - containerPort: 80
        volumeMounts:
        - name: html
          mountPath: /usr/share/nginx/html
      volumes:
      - name: html
        configMap:
          name: batteries-dashboard-static
---
apiVersion: v1
kind: Service
metadata:
  name: batteries-dashboard-static
  namespace: battery-core
spec:
  selector:
    app: batteries-dashboard-static
  ports:
  - port: 80
    targetPort: 80
  type: LoadBalancer